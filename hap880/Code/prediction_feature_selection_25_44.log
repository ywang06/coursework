2019-03-09 13:40:40,418 - CRITICAL - total number of patients is 
2019-03-09 13:40:40,419 - CRITICAL - 18211
2019-03-09 13:40:40,585 - CRITICAL -     dsysrtky   diag min_thru_dt max_thru_dt  dob_dt  gndr_cd  race_cd  state_cd
0  100002329  00845  2011-04-15  2013-05-16       1        1        1        10
1  100002329   1160  2011-06-08  2011-06-08       1        1        1        10
2  100002329   1172  2011-01-04  2011-01-04       1        1        1        10
3  100002329    185  2011-04-13  2015-01-12       2        1        1        10
4  100002329  19889  2012-12-21  2012-12-21       1        1        1        10
5  100002329  25000  2011-04-15  2011-04-15       1        1        1        10
6  100002329  25050  2015-09-14  2015-09-14       2        1        1        10
7  100002329  25200  2012-06-30  2012-06-30       1        1        1        10
8  100002329   2639  2013-05-31  2013-06-30       1        1        1        10
9  100002329   2689  2011-04-05  2011-04-05       1        1        1        10
2019-03-09 13:40:50,816 - CRITICAL - average duration from s3 to s4 is 359.99681511174566 
2019-03-09 13:41:19,802 - CRITICAL - start codebook
2019-03-09 13:41:19,803 - CRITICAL - ckd related icd9 codes are ['32723', '5693', '58381', '25080', '79021', '4019', '30000', '78830', '5789', '412', '3310', 'V1272', '25200', '42823', '4293', '78820', '9597', '49390', '41401', '5849', '28521', 'V5869', '4241', '27800', 'V5883', '4111', '5939', '2811', '41071', '5183', '25001', '49121', '36251', '311', '7859', '99591', '78821', '36616', 'V4582', 'V4511', '7993', '2809', '462', '25050', '43330', '78039', '42833', '7821', '78060', '72402', '43310', '4271', '41090', '78909', '700', 'V1083', '40311', '7241', '7906', '4589', '4149', '1733', 'E8889', '27801', '7224', '2761', '4011', '4168', '2749', '53081', '4160', '4779', '71516', '44021', '3669', 'V431', '4619', '7850', '57420', '7905', '2859', '4139', '6829', '2800', 'V7284', '70715', '7852', '7210', '2851', '42830', '2875', 'V4581', '71945', '37921', '36201', '7243', '27651', '7213', '1101', '3051', '44020', '36501', '37515', '56400', '2819', '7802', '3319', '5920', '2689', 'V0481', '78720', '4148', '78052', '45340', '2449', '25060', '34830', '5589', '4292', '71509', '36511', '2662', '2753', '72252', '4299', '25040', '71690', '78605', '25042', 'V700', '60001', '4242', '42732', '5119', '42789', '7813', '7910', '78659', '185', '5533', '49120', '2768', '4240', '78702', '4659', '2722', '78701', '7242', '72981', '4279', 'V4589', '7869', '7354', '7840', '7931', 'V7281', '25070', '591', '78002', '36202', 'V5881', '5855', '4580', '7823', '73300', '78321', '78607', '7391', '99673', '7030', '56210', 'V4502', '78057', '42731', '7245', '7873', '25062', '7038', '7962', '78093', 'V7283', '5859', '7011', '71590', '5990', '58881', '42822', '78609', '7020', '51889', '4010', '40210', '5932', '7291', '3572', '78703', '4281', '4400', '78959', '5856', '486', '78079', '4254', '514', '79902', '7804', '78097', '2762', '40391', '5845', '7964', '9961', '25000', '51881', '78906', '2512', '71941', '78900', '7244', '7812', '78841', '2724', 'V0382', '78099', '5180', '6826', '5852', '51882', '60000', '72887', '78791', '2769', '72210', '515', '78650', '586', '79431', '5854', '79029', '4439', '2113', '27400', '71596', '40290', '7393', '4359', '73301', '7295', '79099', '79093', '40390', '36256', '59970', '490', '71947', '2900', '2639', '3804', '3569', '73390', '78843', '4928', '78651', '4289', '7851', '6929', '4414', '71595', '70211', '3674', '7907', '79319', 'V5861', '43491', '71946', '436', '5853', '42781', '2948', '78907', '5781', '53011', '59972', '4280', '7881', '2767', 'V7651', '95901', '41400', '2720', '4371', 'V4501', '6827', '70219', '27542', '40310', '7197', '7231', '2752', '53550', '28529', '42832', '496', '7862', '2382', '36653', '5851', '7820', 'V5882', '4660', '36610', '45981', 'V7644', 'V7612', '28860', '27669', '78009', '7140', '2989', '25002', '2869', '0389']
2019-03-09 13:41:19,810 - CRITICAL - calculate diag_duration
2019-03-09 13:42:11,849 - CRITICAL - ['dsysrtky', 'diags_all', 'min_dt_s3', 's3_s4_duration', 'bi_label', 'diags_all_noduplicate', 'key_pid_diag', 'diag_duration']
2019-03-09 13:42:11,870 - CRITICAL -                                diags_all_noduplicate                                       key_pid_diag                                      diag_duration
0  [2859,  4019, [], 4019, 42731,  7295,  78720, ...  [100002329, [2859,  4019, [], 4019, 42731,  72...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
1  [ 20280, 36500,  4011, 7295, 7852, V1042, [], ...  [100006469, [ 20280, 36500,  4011, 7295, 7852,...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 40, 0, 0, 0...
2  [ 3314,  4011, [], 4019, 3310,  71945,  78321,...  [100010619, [ 3314,  4011, [], 4019, 3310,  71...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 40, 0, 0, 0, 0...
3  [2859,  4019,  4011,  7231, [],  4770,  53020,...  [100016674, [2859,  4019,  4011,  7231, [],  4...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
4  [7823, [],  5119,  7823, 7907, 3051,  5849, 42...  [100018697, [7823, [],  5119,  7823, 7907, 305...  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, ...
5  [ 4019,  7213, [], 4019, 71591,  9597, 490, 71...  [100020015, [ 4019,  7213, [], 4019, 71591,  9...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
6  [2859, 2739, [],  78650, 4019,  5723,  59080, ...  [100026179, [2859, 2739, [],  78650, 4019,  57...  [0, 0, 0, 0, 0, 40, 0, 0, 20, 0, 0, 0, 0, 0, 0...
7  [ 2722, 27541,  4011,  5849, 79021,  2409, [],...  [100028237, [ 2722, 27541,  4011,  5849, 79021...  [0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
8  [71596, 70710,  44023,  2989,  4011, 7295,  43...  [100028491, [71596, 70710,  44023,  2989,  401...  [0, 0, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
9  [4240, 41400, 36619, 3679, [],  V1389, 25000, ...  [100032407, [4240, 41400, 36619, 3679, [],  V1...  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
2019-03-09 13:42:11,906 - CRITICAL - start training
2019-03-09 13:42:13,129 - CRITICAL - [[0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 ...
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]
 [0. 0. 0. ... 0. 0. 0.]]
2019-03-09 13:42:31,540 - CRITICAL - finished training
2019-03-09 13:42:31,656 - CRITICAL - sum of predition is: 1141
2019-03-09 13:42:31,695 - CRITICAL - sum of real result is: 2646 
2019-03-09 13:42:31,696 - CRITICAL - total number of sample is: 13658 
2019-03-09 13:42:32,657 - CRITICAL - accuracy_score is: 0.8816078488797774 
2019-03-09 13:42:32,658 - CRITICAL - 1-recall is 0.11429199004246596 
2019-03-09 13:42:32,659 - CRITICAL - 1-precision is 0.004100161077756626 
2019-03-09 13:42:32,659 - CRITICAL - **********auc analysis***********
2019-03-09 13:42:32,700 - CRITICAL - print probs 
2019-03-09 13:42:32,700 - CRITICAL - [0.00000000e+00 0.00000000e+00 9.08100254e-05 ... 9.90192517e-01
 9.90374137e-01 1.00000000e+00]
2019-03-09 13:42:32,701 - CRITICAL - [0.33333333 0.3590325  0.3590325  ... 1.         1.         1.        ]
2019-03-09 13:42:32,701 - CRITICAL - [9.99853472e-01 9.10457296e-01 9.05608797e-01 ... 5.84723189e-13
 5.26783474e-13 1.76402971e-34]
2019-03-09 13:42:32,701 - CRITICAL - auc for logistic regression is 0.8247519060495813
2019-03-09 13:42:32,701 - CRITICAL - ******************** TEST PART************************
2019-03-09 13:42:32,731 - CRITICAL - sum of predition is: 411 
2019-03-09 13:42:32,742 - CRITICAL - sum of real result is: 841 
2019-03-09 13:42:32,742 - CRITICAL - total number of sample is: 4553 
2019-03-09 13:42:32,768 - CRITICAL - accuracy_score is: 0.8607511530858775 
2019-03-09 13:42:32,768 - CRITICAL - 1-recall is
2019-03-09 13:42:32,768 - CRITICAL - 0.11684603558093565
2019-03-09 13:42:32,768 - CRITICAL - 1-precision is 0.02240281133318691 
2019-03-09 13:42:32,768 - CRITICAL - **********auc analysis***********
2019-03-09 13:42:33,054 - CRITICAL - print probs 
2019-03-09 13:42:33,054 - CRITICAL - [[7.97451908e-01 2.02548092e-01]
 [9.99999413e-01 5.87443477e-07]
 [8.98232973e-01 1.01767027e-01]
 ...
 [9.08736845e-01 9.12631554e-02]
 [7.97451908e-01 2.02548092e-01]
 [9.63844281e-01 3.61557193e-02]]
2019-03-09 13:42:33,054 - CRITICAL - auc for logistic regression is 0.7114255209828202
